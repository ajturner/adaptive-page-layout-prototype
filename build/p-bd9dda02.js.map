{"version":3,"names":["labelClickEvent","labelConnectedEvent","labelDisconnectedEvent","labelTagName","onLabelClickMap","WeakMap","onLabelConnectedMap","onLabelDisconnectedMap","unlabeledComponents","Set","findLabelForComponent","componentEl","id","forLabel","queryElementRoots","selector","parentLabel","closestElementCrossShadowBoundary","hasAncestorCustomElements","label","traversedElements","customElementAncestorCheckEventType","listener","event","stopImmediatePropagation","composedPath","slice","indexOf","addEventListener","once","dispatchEvent","CustomEvent","composed","bubbles","removeEventListener","ancestorCustomElements","filter","el","tagName","includes","length","connectLabel","component","labelEl","has","boundOnLabelDisconnected","onLabelDisconnected","bind","boundOnLabelClick","onLabelClick","set","delete","document","get","disconnectLabel","getLabelText","textContent","trim","this","disabled","containedLabelableChildClicked","contains","detail","sourceEvent","target","onLabelConnected","add","boundOnLabelConnected"],"sources":["./node_modules/@esri/calcite-components/dist/collection/utils/label.js"],"sourcesContent":["/*!\n * All material copyright ESRI, All Rights Reserved, unless otherwise specified.\n * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.\n * v1.2.0\n */\nimport { closestElementCrossShadowBoundary, queryElementRoots } from \"./dom\";\n/**\n * Exported for testing purposes only\n *\n * @internal\n */\nexport const labelClickEvent = \"calciteInternalLabelClick\";\nexport const labelConnectedEvent = \"calciteInternalLabelConnected\";\nexport const labelDisconnectedEvent = \"calciteInternaLabelDisconnected\";\nconst labelTagName = \"calcite-label\";\nconst onLabelClickMap = new WeakMap();\nconst onLabelConnectedMap = new WeakMap();\nconst onLabelDisconnectedMap = new WeakMap();\nconst unlabeledComponents = new Set();\nconst findLabelForComponent = (componentEl) => {\n  const { id } = componentEl;\n  const forLabel = id && queryElementRoots(componentEl, { selector: `${labelTagName}[for=\"${id}\"]` });\n  if (forLabel) {\n    return forLabel;\n  }\n  const parentLabel = closestElementCrossShadowBoundary(componentEl, labelTagName);\n  if (!parentLabel ||\n    // labelable components within other custom elements are not considered labelable\n    hasAncestorCustomElements(parentLabel, componentEl)) {\n    return null;\n  }\n  return parentLabel;\n};\nfunction hasAncestorCustomElements(label, componentEl) {\n  let traversedElements;\n  const customElementAncestorCheckEventType = \"custom-element-ancestor-check\";\n  const listener = (event) => {\n    event.stopImmediatePropagation();\n    const composedPath = event.composedPath();\n    traversedElements = composedPath.slice(composedPath.indexOf(componentEl), composedPath.indexOf(label));\n  };\n  label.addEventListener(customElementAncestorCheckEventType, listener, { once: true });\n  componentEl.dispatchEvent(new CustomEvent(customElementAncestorCheckEventType, { composed: true, bubbles: true }));\n  label.removeEventListener(customElementAncestorCheckEventType, listener);\n  const ancestorCustomElements = traversedElements\n    .filter((el) => el !== componentEl && el !== label)\n    .filter((el) => el.tagName?.includes(\"-\"));\n  return ancestorCustomElements.length > 0;\n}\n/**\n * Helper to set up label interactions on connectedCallback.\n *\n * @param component\n */\nexport function connectLabel(component) {\n  const labelEl = findLabelForComponent(component.el);\n  if (onLabelClickMap.has(labelEl) || (!labelEl && unlabeledComponents.has(component))) {\n    return;\n  }\n  const boundOnLabelDisconnected = onLabelDisconnected.bind(component);\n  if (labelEl) {\n    component.labelEl = labelEl;\n    const boundOnLabelClick = onLabelClick.bind(component);\n    onLabelClickMap.set(component.labelEl, boundOnLabelClick);\n    component.labelEl.addEventListener(labelClickEvent, boundOnLabelClick);\n    unlabeledComponents.delete(component);\n    document.removeEventListener(labelConnectedEvent, onLabelConnectedMap.get(component));\n    onLabelDisconnectedMap.set(component, boundOnLabelDisconnected);\n    document.addEventListener(labelDisconnectedEvent, boundOnLabelDisconnected);\n  }\n  else if (!unlabeledComponents.has(component)) {\n    boundOnLabelDisconnected();\n    document.removeEventListener(labelDisconnectedEvent, onLabelDisconnectedMap.get(component));\n  }\n}\n/**\n * Helper to tear down label interactions on disconnectedCallback on labelable components.\n *\n * @param component\n */\nexport function disconnectLabel(component) {\n  unlabeledComponents.delete(component);\n  document.removeEventListener(labelConnectedEvent, onLabelConnectedMap.get(component));\n  document.removeEventListener(labelDisconnectedEvent, onLabelDisconnectedMap.get(component));\n  onLabelConnectedMap.delete(component);\n  onLabelDisconnectedMap.delete(component);\n  if (!component.labelEl) {\n    return;\n  }\n  const boundOnLabelClick = onLabelClickMap.get(component.labelEl);\n  component.labelEl.removeEventListener(labelClickEvent, boundOnLabelClick);\n  onLabelClickMap.delete(component.labelEl);\n}\n/**\n * Helper to get the label text from a component.\n *\n * @param component\n */\nexport function getLabelText(component) {\n  return component.label || component.labelEl?.textContent?.trim() || \"\";\n}\nfunction onLabelClick(event) {\n  if (this.disabled) {\n    return;\n  }\n  const containedLabelableChildClicked = this.el.contains(event.detail.sourceEvent.target);\n  if (containedLabelableChildClicked) {\n    return;\n  }\n  this.onLabelClick(event);\n}\nfunction onLabelConnected() {\n  if (unlabeledComponents.has(this)) {\n    connectLabel(this);\n  }\n}\nfunction onLabelDisconnected() {\n  unlabeledComponents.add(this);\n  const boundOnLabelConnected = onLabelConnectedMap.get(this) || onLabelConnected.bind(this);\n  onLabelConnectedMap.set(this, boundOnLabelConnected);\n  document.addEventListener(labelConnectedEvent, boundOnLabelConnected);\n}\n"],"mappings":";;;;;GAWO,MAAMA,EAAkB,4BACnB,MAACC,EAAsB,gCACvB,MAACC,EAAyB,kCACtC,MAAMC,EAAe,gBACrB,MAAMC,EAAkB,IAAIC,QAC5B,MAAMC,EAAsB,IAAID,QAChC,MAAME,EAAyB,IAAIF,QACnC,MAAMG,EAAsB,IAAIC,IAChC,MAAMC,EAAyBC,IAC7B,MAAMC,GAAEA,GAAOD,EACf,MAAME,EAAWD,GAAME,EAAkBH,EAAa,CAAEI,SAAU,GAAGZ,UAAqBS,QAC1F,GAAIC,EAAU,CACZ,OAAOA,CACX,CACE,MAAMG,EAAcC,EAAkCN,EAAaR,GACnE,IAAKa,GAEHE,EAA0BF,EAAaL,GAAc,CACrD,OAAO,IACX,CACE,OAAOK,CAAW,EAEpB,SAASE,EAA0BC,EAAOR,GACxC,IAAIS,EACJ,MAAMC,EAAsC,gCAC5C,MAAMC,EAAYC,IAChBA,EAAMC,2BACN,MAAMC,EAAeF,EAAME,eAC3BL,EAAoBK,EAAaC,MAAMD,EAAaE,QAAQhB,GAAcc,EAAaE,QAAQR,GAAO,EAExGA,EAAMS,iBAAiBP,EAAqCC,EAAU,CAAEO,KAAM,OAC9ElB,EAAYmB,cAAc,IAAIC,YAAYV,EAAqC,CAAEW,SAAU,KAAMC,QAAS,QAC1Gd,EAAMe,oBAAoBb,EAAqCC,GAC/D,MAAMa,EAAyBf,EAC5BgB,QAAQC,GAAOA,IAAO1B,GAAe0B,IAAOlB,IAC5CiB,QAAQC,GAAOA,EAAGC,SAASC,SAAS,OACvC,OAAOJ,EAAuBK,OAAS,CACzC,CAMO,SAASC,EAAaC,GAC3B,MAAMC,EAAUjC,EAAsBgC,EAAUL,IAChD,GAAIjC,EAAgBwC,IAAID,KAAcA,GAAWnC,EAAoBoC,IAAIF,GAAa,CACpF,MACJ,CACE,MAAMG,EAA2BC,EAAoBC,KAAKL,GAC1D,GAAIC,EAAS,CACXD,EAAUC,QAAUA,EACpB,MAAMK,EAAoBC,EAAaF,KAAKL,GAC5CtC,EAAgB8C,IAAIR,EAAUC,QAASK,GACvCN,EAAUC,QAAQf,iBAAiB5B,EAAiBgD,GACpDxC,EAAoB2C,OAAOT,GAC3BU,SAASlB,oBAAoBjC,EAAqBK,EAAoB+C,IAAIX,IAC1EnC,EAAuB2C,IAAIR,EAAWG,GACtCO,SAASxB,iBAAiB1B,EAAwB2C,EACtD,MACO,IAAKrC,EAAoBoC,IAAIF,GAAY,CAC5CG,IACAO,SAASlB,oBAAoBhC,EAAwBK,EAAuB8C,IAAIX,GACpF,CACA,CAMO,SAASY,EAAgBZ,GAC9BlC,EAAoB2C,OAAOT,GAC3BU,SAASlB,oBAAoBjC,EAAqBK,EAAoB+C,IAAIX,IAC1EU,SAASlB,oBAAoBhC,EAAwBK,EAAuB8C,IAAIX,IAChFpC,EAAoB6C,OAAOT,GAC3BnC,EAAuB4C,OAAOT,GAC9B,IAAKA,EAAUC,QAAS,CACtB,MACJ,CACE,MAAMK,EAAoB5C,EAAgBiD,IAAIX,EAAUC,SACxDD,EAAUC,QAAQT,oBAAoBlC,EAAiBgD,GACvD5C,EAAgB+C,OAAOT,EAAUC,QACnC,CAMO,SAASY,EAAab,GAC3B,OAAOA,EAAUvB,OAASuB,EAAUC,SAASa,aAAaC,QAAU,EACtE,CACA,SAASR,EAAa1B,GACpB,GAAImC,KAAKC,SAAU,CACjB,MACJ,CACE,MAAMC,EAAiCF,KAAKrB,GAAGwB,SAAStC,EAAMuC,OAAOC,YAAYC,QACjF,GAAIJ,EAAgC,CAClC,MACJ,CACEF,KAAKT,aAAa1B,EACpB,CACA,SAAS0C,IACP,GAAIzD,EAAoBoC,IAAIc,MAAO,CACjCjB,EAAaiB,KACjB,CACA,CACA,SAASZ,IACPtC,EAAoB0D,IAAIR,MACxB,MAAMS,EAAwB7D,EAAoB+C,IAAIK,OAASO,EAAiBlB,KAAKW,MACrFpD,EAAoB4C,IAAIQ,KAAMS,GAC9Bf,SAASxB,iBAAiB3B,EAAqBkE,EACjD,Q"}
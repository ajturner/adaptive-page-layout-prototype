import{r as t,c as e,h as i,F as a,g as n,f as s,H as o}from"./p-a5f4e010.js";import{g as r}from"./p-985ef3b4.js";import{t as c,i as l,h as d,j as h,q as f}from"./p-ca562010.js";import{g as m}from"./p-30b0f762.js";import{i as p}from"./p-62d90ff5.js";import{a as u,s as g,c as v}from"./p-04967691.js";import{C as b,I as x,S as w}from"./p-96f32c04.js";import{f as y,c as k,b as E,u as D,a as H,r as z,F as P}from"./p-2380a0d9.js";import{c as C,d as _,a as j,u as I}from"./p-be57ca23.js";import{c as A,d as M}from"./p-04fd5134.js";import{H as B}from"./p-cb2d8282.js";import{c as O,d as L}from"./p-1ddddc69.js";import{u as S,c as $,s as R,d as F}from"./p-662302cc.js";import"./p-5f83161a.js";import"./p-58421494.js";import"./p-e6be3162.js";const T="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0.01}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host{box-sizing:border-box;display:flex;flex-direction:column;background-color:var(--calcite-ui-foreground-1);font-size:var(--calcite-font-size-1);color:var(--calcite-ui-text-2)}.menu ::slotted(calcite-action){margin:0.125rem;display:flex;outline-color:transparent}.menu ::slotted(calcite-action[active]){outline:2px solid var(--calcite-ui-brand);outline-offset:0px}.default-trigger{position:relative;block-size:100%;flex:0 1 auto;align-self:stretch}slot[name=trigger]::slotted(calcite-action),calcite-action::slotted([slot=trigger]){position:relative;block-size:100%;flex:0 1 auto;align-self:stretch}.menu{flex-direction:column;flex-wrap:nowrap;outline:2px solid transparent;outline-offset:2px}";const U=["ArrowUp","ArrowDown","End","Home"];const W=class{constructor(i){t(this,i);this.calciteActionMenuOpen=e(this,"calciteActionMenuOpen",6);this.actionElements=[];this.guid=`calcite-action-menu-${m()}`;this.menuId=`${this.guid}-menu`;this.menuButtonId=`${this.guid}-menu-button`;this.connectMenuButtonEl=()=>{const{menuButtonId:t,menuId:e,open:i,label:a}=this;const n=this.slottedMenuButtonEl||this.defaultMenuButtonEl;if(this.menuButtonEl===n){return}this.disconnectMenuButtonEl();this.menuButtonEl=n;this.setTooltipReferenceElement();if(!n){return}n.active=i;n.setAttribute("aria-controls",e);n.setAttribute("aria-expanded",c(i));n.setAttribute("aria-haspopup","true");if(!n.id){n.id=t}if(!n.label){n.label=a}if(!n.text){n.text=a}n.addEventListener("pointerdown",this.menuButtonClick);n.addEventListener("keydown",this.menuButtonKeyDown)};this.disconnectMenuButtonEl=()=>{const{menuButtonEl:t}=this;if(!t){return}t.removeEventListener("pointerdown",this.menuButtonClick);t.removeEventListener("keydown",this.menuButtonKeyDown)};this.setMenuButtonEl=t=>{const e=t.target.assignedElements({flatten:true}).filter((t=>t===null||t===void 0?void 0:t.matches("calcite-action")));this.slottedMenuButtonEl=e[0];this.connectMenuButtonEl()};this.setDefaultMenuButtonEl=t=>{this.defaultMenuButtonEl=t;this.connectMenuButtonEl()};this.handleCalciteActionClick=()=>{this.open=false;this.setFocus()};this.menuButtonClick=t=>{if(!l(t)){return}this.toggleOpen()};this.updateTooltip=t=>{const e=t.target.assignedElements({flatten:true}).filter((t=>t===null||t===void 0?void 0:t.matches("calcite-tooltip")));this.tooltipEl=e[0];this.setTooltipReferenceElement()};this.setTooltipReferenceElement=()=>{const{tooltipEl:t,expanded:e,menuButtonEl:i,open:a}=this;if(t){t.referenceElement=!e&&!a?i:null}};this.updateAction=(t,e)=>{const{guid:i,activeMenuItemIndex:a}=this;const n=`${i}-action-${e}`;t.tabIndex=-1;t.setAttribute("role","menuitem");if(!t.id){t.id=n}t.active=e===a};this.updateActions=t=>{t===null||t===void 0?void 0:t.forEach(this.updateAction)};this.handleDefaultSlotChange=t=>{const e=t.target.assignedElements({flatten:true}).filter((t=>t===null||t===void 0?void 0:t.matches("calcite-action")));this.actionElements=e};this.menuButtonKeyDown=t=>{const{key:e}=t;const{actionElements:i,activeMenuItemIndex:a,open:n}=this;if(!i.length){return}if(p(e)){t.preventDefault();if(!n){this.toggleOpen();return}const e=i[a];e?e.click():this.toggleOpen(false)}if(e==="Tab"){this.open=false;return}if(e==="Escape"){this.toggleOpen(false);t.preventDefault();return}this.handleActionNavigation(t,e,i)};this.handleActionNavigation=(t,e,i)=>{if(!this.isValidKey(e,U)){return}t.preventDefault();if(!this.open){this.toggleOpen();if(e==="Home"||e==="ArrowDown"){this.activeMenuItemIndex=0}if(e==="End"||e==="ArrowUp"){this.activeMenuItemIndex=i.length-1}return}if(e==="Home"){this.activeMenuItemIndex=0}if(e==="End"){this.activeMenuItemIndex=i.length-1}const a=this.activeMenuItemIndex;if(e==="ArrowUp"){this.activeMenuItemIndex=r(Math.max(a-1,-1),i.length)}if(e==="ArrowDown"){this.activeMenuItemIndex=r(a+1,i.length)}};this.toggleOpenEnd=()=>{this.setFocus();this.el.removeEventListener("calcitePopoverOpen",this.toggleOpenEnd)};this.toggleOpen=(t=!this.open)=>{this.el.addEventListener("calcitePopoverOpen",this.toggleOpenEnd);this.open=t};this.expanded=false;this.flipPlacements=undefined;this.label=undefined;this.open=false;this.overlayPositioning="absolute";this.placement="auto";this.scale=undefined;this.menuButtonEl=undefined;this.activeMenuItemIndex=-1}componentWillLoad(){u(this)}componentDidLoad(){g(this)}disconnectedCallback(){this.disconnectMenuButtonEl()}expandedHandler(){this.open=false;this.setTooltipReferenceElement()}openHandler(t){this.activeMenuItemIndex=this.open?0:-1;if(this.menuButtonEl){this.menuButtonEl.active=t}this.calciteActionMenuOpen.emit();this.setTooltipReferenceElement()}closeCalciteActionMenuOnClick(t){if(!l(t)){return}const e=t.composedPath();if(e.includes(this.el)){return}this.open=false}activeMenuItemIndexHandler(){this.updateActions(this.actionElements)}async setFocus(){await v(this);d(this.menuButtonEl)}renderMenuButton(){const{label:t,scale:e,expanded:a}=this;const n=i("slot",{name:w.trigger,onSlotchange:this.setMenuButtonEl},i("calcite-action",{class:b.defaultTrigger,icon:x.menu,scale:e,text:t,textEnabled:a,ref:this.setDefaultMenuButtonEl}));return n}renderMenuItems(){const{actionElements:t,activeMenuItemIndex:e,open:a,menuId:n,menuButtonEl:s,label:o,placement:r,overlayPositioning:c,flipPlacements:l}=this;const d=t[e];const h=(d===null||d===void 0?void 0:d.id)||null;return i("calcite-popover",{flipPlacements:l,focusTrapDisabled:true,label:o,offsetDistance:0,open:a,overlayPositioning:c,placement:r,pointerDisabled:true,referenceElement:s},i("div",{"aria-activedescendant":h,"aria-labelledby":s===null||s===void 0?void 0:s.id,class:b.menu,id:n,onClick:this.handleCalciteActionClick,role:"menu",tabIndex:-1},i("slot",{onSlotchange:this.handleDefaultSlotChange})))}render(){return i(a,null,this.renderMenuButton(),this.renderMenuItems(),i("slot",{name:w.tooltip,onSlotchange:this.updateTooltip}))}isValidKey(t,e){return!!e.find((e=>e===t))}get el(){return n(this)}static get watchers(){return{expanded:["expandedHandler"],open:["openHandler"],activeMenuItemIndex:["activeMenuItemIndexHandler"]}}};W.style=T;
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.2.0
 */const X={container:"container",arrow:"arrow",imageContainer:"image-container",closeButtonContainer:"close-button-container",closeButton:"close-button",content:"content",hasHeader:"has-header",header:"header",headerContent:"header-content",heading:"heading"};const Y="auto";const q="aria-controls";const K="aria-expanded";
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.2.0
 */class V{constructor(){this.registeredElements=new Map;this.registeredElementCount=0;this.queryPopover=t=>{const{registeredElements:e}=this;const i=t.find((t=>e.has(t)));return e.get(i)};this.togglePopovers=t=>{const e=t.composedPath();const i=this.queryPopover(e);if(i&&!i.triggerDisabled){i.open=!i.open}Array.from(this.registeredElements.values()).filter((t=>t!==i&&t.autoClose&&t.open&&!e.includes(t))).forEach((t=>t.open=false))};this.keyHandler=t=>{if(t.defaultPrevented){return}if(t.key==="Escape"){this.closeAllPopovers()}else if(p(t.key)){this.togglePopovers(t)}};this.clickHandler=t=>{if(l(t)){this.togglePopovers(t)}}}registerElement(t,e){this.registeredElementCount++;this.registeredElements.set(t,e);if(this.registeredElementCount===1){this.addListeners()}}unregisterElement(t){if(this.registeredElements.delete(t)){this.registeredElementCount--}if(this.registeredElementCount===0){this.removeListeners()}}closeAllPopovers(){Array.from(this.registeredElements.values()).forEach((t=>t.open=false))}addListeners(){document.addEventListener("pointerdown",this.clickHandler,{capture:true});document.addEventListener("keydown",this.keyHandler,{capture:true})}removeListeners(){document.removeEventListener("pointerdown",this.clickHandler,{capture:true});document.removeEventListener("keydown",this.keyHandler,{capture:true})}}const G='@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0.01}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host{--calcite-floating-ui-z-index:var(--calcite-popover-z-index, 900);display:block;position:absolute;z-index:var(--calcite-floating-ui-z-index)}.calcite-floating-ui-anim{position:relative;transition:var(--calcite-floating-ui-transition);transition-property:transform, visibility, opacity;opacity:0;box-shadow:0 0 16px 0 rgba(0, 0, 0, 0.16);z-index:1;border-radius:0.25rem}:host([data-placement^=bottom]) .calcite-floating-ui-anim{transform:translateY(-5px)}:host([data-placement^=top]) .calcite-floating-ui-anim{transform:translateY(5px)}:host([data-placement^=left]) .calcite-floating-ui-anim{transform:translateX(5px)}:host([data-placement^=right]) .calcite-floating-ui-anim{transform:translateX(-5px)}:host([data-placement]) .calcite-floating-ui-anim--active{opacity:1;transform:translate(0)}:host([calcite-hydrated-hidden]){visibility:hidden !important;pointer-events:none}.arrow,.arrow::before{position:absolute;inline-size:8px;block-size:8px;z-index:-1}.arrow::before{content:"";--tw-shadow:0 4px 8px -1px rgba(0, 0, 0, 0.08), 0 2px 4px -1px rgba(0, 0, 0, 0.04);--tw-shadow-colored:0 4px 8px -1px var(--tw-shadow-color), 0 2px 4px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);transform:rotate(45deg);background:var(--calcite-ui-foreground-1)}:host([data-placement^=top]) .arrow{inset-block-end:-4px}:host([data-placement^=bottom]) .arrow{inset-block-start:-4px}:host([data-placement^=right]) .arrow,:host([data-placement^=left]) .arrow{direction:ltr;text-align:start}:host([data-placement^=left]) .arrow{inset-inline-end:-4px}:host([data-placement^=right]) .arrow{inset-inline-start:-4px}:host([scale=s]) .heading{padding-inline:0.75rem;padding-block:0.5rem;font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=m]) .heading{padding-inline:1rem;padding-block:0.75rem;font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=l]) .heading{padding-inline:1.25rem;padding-block:1rem;font-size:var(--calcite-font-size-1);line-height:1.375}:host{pointer-events:none}:host([open]){pointer-events:initial}.calcite-floating-ui-anim{border-radius:0.25rem;border-width:1px;border-style:solid;border-color:var(--calcite-ui-border-3);background-color:var(--calcite-ui-foreground-1)}.arrow::before{outline:1px solid var(--calcite-ui-border-3)}.header{display:flex;flex:1 1 auto;align-items:stretch;justify-content:flex-start;border-width:0px;border-block-end-width:1px;border-style:solid;background-color:var(--calcite-ui-foreground-1);border-block-end-color:var(--calcite-ui-border-3)}.heading{margin:0px;display:block;flex:1 1 auto;align-self:center;white-space:normal;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-ui-text-1);word-wrap:break-word;word-break:break-word}.container{position:relative;display:flex;block-size:100%;flex-direction:row;flex-wrap:nowrap;border-radius:0.25rem;background-color:var(--calcite-ui-foreground-1);color:var(--calcite-ui-text-1)}.container.has-header{flex-direction:column}.content{display:flex;block-size:100%;inline-size:100%;flex-direction:column;flex-wrap:nowrap;align-self:center;word-wrap:break-word;word-break:break-word}.close-button-container{display:flex;overflow:hidden;flex:0 0 auto;border-start-end-radius:0.25rem;border-end-end-radius:0.25rem}::slotted(calcite-panel),::slotted(calcite-flow){block-size:100%}';const J=new V;const N=class{constructor(i){t(this,i);this.calcitePopoverBeforeClose=e(this,"calcitePopoverBeforeClose",6);this.calcitePopoverClose=e(this,"calcitePopoverClose",6);this.calcitePopoverBeforeOpen=e(this,"calcitePopoverBeforeOpen",6);this.calcitePopoverOpen=e(this,"calcitePopoverOpen",6);this.guid=`calcite-popover-${m()}`;this.openTransitionProp="opacity";this.hasLoaded=false;this.setTransitionEl=t=>{this.transitionEl=t;A(this);this.focusTrapEl=t;C(this)};this.setFilteredPlacements=()=>{const{el:t,flipPlacements:e}=this;this.filteredFlipPlacements=e?y(e,t):null};this.setUpReferenceElement=(t=true)=>{this.removeReferences();this.effectiveReferenceElement=this.getReferenceElement();k(this,this.effectiveReferenceElement,this.el);const{el:e,referenceElement:i,effectiveReferenceElement:a}=this;if(t&&i&&!a){console.warn(`${e.tagName}: reference-element id "${i}" was not found.`,{el:e})}this.addReferences()};this.getId=()=>this.el.id||this.guid;this.setExpandedAttr=()=>{const{effectiveReferenceElement:t,open:e}=this;if(!t){return}if("setAttribute"in t){t.setAttribute(K,c(e))}};this.addReferences=()=>{const{effectiveReferenceElement:t}=this;if(!t){return}const e=this.getId();if("setAttribute"in t){t.setAttribute(q,e)}J.registerElement(t,this.el);this.setExpandedAttr()};this.removeReferences=()=>{const{effectiveReferenceElement:t}=this;if(!t){return}if("removeAttribute"in t){t.removeAttribute(q);t.removeAttribute(K)}J.unregisterElement(t)};this.hide=()=>{this.open=false};this.storeArrowEl=t=>{this.arrowEl=t;this.reposition(true)};this.autoClose=false;this.closable=false;this.flipDisabled=false;this.focusTrapDisabled=false;this.pointerDisabled=false;this.flipPlacements=undefined;this.heading=undefined;this.headingLevel=undefined;this.label=undefined;this.messageOverrides=undefined;this.messages=undefined;this.offsetDistance=E;this.offsetSkidding=0;this.open=false;this.overlayPositioning="absolute";this.placement=Y;this.referenceElement=undefined;this.scale="m";this.triggerDisabled=false;this.effectiveLocale="";this.effectiveReferenceElement=undefined;this.defaultMessages=undefined}handlefocusTrapDisabled(t){if(!this.open){return}t?_(this):j(this)}flipPlacementsHandler(){this.setFilteredPlacements();this.reposition(true)}onMessagesChange(){}offsetDistanceOffsetHandler(){this.reposition(true)}offsetSkiddingHandler(){this.reposition(true)}openHandler(t){if(t){this.reposition(true)}else{D(this.el)}this.setExpandedAttr()}overlayPositioningHandler(){this.reposition(true)}placementHandler(){this.reposition(true)}referenceElementHandler(){this.setUpReferenceElement();this.reposition(true)}effectiveLocaleChange(){S(this,this.effectiveLocale)}connectedCallback(){this.setFilteredPlacements();O(this);$(this);A(this);this.setUpReferenceElement(this.hasLoaded)}async componentWillLoad(){await R(this);u(this)}componentDidLoad(){g(this);if(this.referenceElement&&!this.effectiveReferenceElement){this.setUpReferenceElement()}this.reposition();this.hasLoaded=true}disconnectedCallback(){this.removeReferences();L(this);F(this);H(this,this.effectiveReferenceElement,this.el);M(this);_(this)}async reposition(t=false){const{el:e,effectiveReferenceElement:i,placement:a,overlayPositioning:n,flipDisabled:s,filteredFlipPlacements:o,offsetDistance:r,offsetSkidding:c,arrowEl:l}=this;return z(this,{floatingEl:e,referenceEl:i,overlayPositioning:n,placement:a,flipDisabled:s,flipPlacements:o,offsetDistance:r,offsetSkidding:c,includeArrow:!this.pointerDisabled,arrowEl:l,type:"popover"},t)}async setFocus(){await v(this);s(this.el);h(this.focusTrapEl)}async updateFocusTrapElements(){I(this)}getReferenceElement(){const{referenceElement:t,el:e}=this;return(typeof t==="string"?f(e,{id:t}):t)||null}onBeforeOpen(){this.calcitePopoverBeforeOpen.emit()}onOpen(){this.calcitePopoverOpen.emit();j(this)}onBeforeClose(){this.calcitePopoverBeforeClose.emit()}onClose(){this.calcitePopoverClose.emit();_(this)}renderCloseButton(){const{messages:t,closable:e}=this;return e?i("div",{class:X.closeButtonContainer,key:X.closeButtonContainer},i("calcite-action",{class:X.closeButton,onClick:this.hide,scale:this.scale,text:t.close,ref:t=>this.closeButtonEl=t},i("calcite-icon",{icon:"x",scale:this.scale==="l"?"m":this.scale}))):null}renderHeader(){const{heading:t,headingLevel:e}=this;const a=t?i(B,{class:X.heading,level:e},t):null;return a?i("div",{class:X.header,key:X.header},a,this.renderCloseButton()):null}render(){const{effectiveReferenceElement:t,heading:e,label:a,open:n,pointerDisabled:s}=this;const r=t&&n;const l=!r;const d=!s?i("div",{class:X.arrow,ref:this.storeArrowEl}):null;return i(o,{"aria-hidden":c(l),"aria-label":a,"aria-live":"polite","calcite-hydrated-hidden":l,id:this.getId(),role:"dialog"},i("div",{class:{[P.animation]:true,[P.animationActive]:r},ref:this.setTransitionEl},d,i("div",{class:{[X.hasHeader]:!!e,[X.container]:true}},this.renderHeader(),i("div",{class:X.content},i("slot",null)),!e?this.renderCloseButton():null)))}static get assetsDirs(){return["assets"]}get el(){return n(this)}static get watchers(){return{focusTrapDisabled:["handlefocusTrapDisabled"],flipPlacements:["flipPlacementsHandler"],messageOverrides:["onMessagesChange"],offsetDistance:["offsetDistanceOffsetHandler"],offsetSkidding:["offsetSkiddingHandler"],open:["openHandler"],overlayPositioning:["overlayPositioningHandler"],placement:["placementHandler"],referenceElement:["referenceElementHandler"],effectiveLocale:["effectiveLocaleChange"]}}};N.style=G;export{W as calcite_action_menu,N as calcite_popover};
//# sourceMappingURL=p-9bd92b0f.entry.js.map
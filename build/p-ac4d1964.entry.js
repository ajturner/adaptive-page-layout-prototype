import{r as t,c as i,h as e,g as a}from"./p-a5f4e010.js";import{t as s}from"./p-ca562010.js";import{u as n}from"./p-7b97aed3.js";import{c as o}from"./p-e6be3162.js";import{u as l,g as c,M as r}from"./p-10390392.js";import{a as d,s as h,c as m}from"./p-04967691.js";import{d as f}from"./p-58421494.js";import"./p-30b0f762.js";import"./p-5f83161a.js";
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.2.0
 */const p={container:"container",table:"table",scrim:"scrim",tableContainer:"table-container",sticky:"sticky-pos"};const u=100;const b="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0.01}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host([disabled]){pointer-events:none;cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-ui-opacity-disabled)}:host{display:block}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.container{position:relative}.table-container{position:relative;z-index:1;box-sizing:border-box;display:flex;inline-size:100%;flex-direction:column;background-color:transparent}.table-container *{box-sizing:border-box}.table{inline-size:100%}::slotted(calcite-list-item){margin-block-end:1px;--tw-shadow:0 1px 0 var(--calcite-ui-border-3);--tw-shadow-colored:0 1px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}::slotted(calcite-list-item:last-child){--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.sticky-pos{position:sticky;inset-block-start:0px;z-index:300}calcite-filter{margin-block-end:1px}";const v="calcite-list-item";const w=class{constructor(e){t(this,e);this.calciteListFilter=i(this,"calciteListFilter",6);this.listItems=[];this.enabledListItems=[];this.mutationObserver=o("mutation",(()=>this.updateListItems()));this.handleDefaultSlotChange=t=>{l(c(t))};this.setActiveListItem=()=>{const{enabledListItems:t}=this;if(!t.some((t=>t.active))){if(t[0]){t[0].active=true}}};this.updateSelectedItems=f((()=>{this.selectedItems=this.enabledListItems.filter((t=>t.selected))}),u);this.updateFilteredItems=f((()=>{const{listItems:t,filteredData:i,filterText:e}=this;const a=i.map((t=>t.value));const s=new Set;const n=(t===null||t===void 0?void 0:t.filter((t=>{const i=t.parentElement;const n=i.matches("calcite-list-item-group");if(n){s.add(i)}const o=e?a.includes(t.value):true;t.hidden=!o;return o})))||[];this.filteredItems=n;s.forEach((t=>{const i=n.some((i=>t.contains(i)));t.hidden=!i;if(!i){return}const e=t.closest("calcite-list-item");if(e){e.hidden=false;if(n.includes(e)){Array.from(t.querySelectorAll("calcite-list-item")).forEach((t=>t.hidden=false))}}}));s.clear()}));this.handleFilter=t=>{t.stopPropagation();const{filteredItems:i,value:e}=t.currentTarget;this.filteredData=i;this.filterText=e;this.updateFilteredItems();this.calciteListFilter.emit()};this.getItemData=()=>this.listItems.map((t=>({label:t.label,description:t.description,metadata:t.metadata,value:t.value})));this.queryListItems=()=>Array.from(this.el.querySelectorAll(v));this.focusRow=t=>{const{enabledListItems:i}=this;if(!t){return}i.forEach((i=>i.active=i===t));t.setFocus()};this.isNavigable=t=>{var i;const e=(i=t.parentElement)===null||i===void 0?void 0:i.closest(v);if(!e){return true}return e.open&&this.isNavigable(e)};this.handleListKeydown=t=>{const{key:i}=t;const e=this.enabledListItems.filter((t=>this.isNavigable(t)));const a=e.findIndex((t=>t.active));if(i==="ArrowDown"){t.preventDefault();const i=a+1;if(e[i]){this.focusRow(e[i])}}else if(i==="ArrowUp"){t.preventDefault();const i=a-1;if(e[i]){this.focusRow(e[i])}}else if(i==="Home"){t.preventDefault();const i=e[0];if(i){this.focusRow(i)}}else if(i==="End"){t.preventDefault();const i=e[e.length-1];if(i){this.focusRow(i)}}};this.disabled=false;this.filterEnabled=false;this.filteredItems=[];this.filteredData=[];this.filterPlaceholder=undefined;this.filterText=undefined;this.label=undefined;this.loading=false;this.openable=false;this.selectedItems=[];this.selectionMode="none";this.selectionAppearance="icon";this.dataForFilter=[]}handleFilterEnabledChange(){this.updateListItems()}handleSelectionAppearanceChange(){this.updateListItems()}handleCalciteInternalFocusPreviousItem(t){t.stopPropagation();const{enabledListItems:i}=this;const e=i.findIndex((t=>t.active));const a=e-1;if(i[a]){this.focusRow(i[a])}}handleCalciteListItemActive(t){const i=t.target;const{listItems:e}=this;e.forEach((t=>{t.active=t===i}))}handleCalciteListItemSelect(t){const i=t.target;const{listItems:e,selectionMode:a}=this;e.forEach((t=>{if(a==="single"){t.selected=t===i}}));this.updateSelectedItems()}connectedCallback(){var t;(t=this.mutationObserver)===null||t===void 0?void 0:t.observe(this.el,{childList:true,subtree:true});this.updateListItems()}disconnectedCallback(){var t;(t=this.mutationObserver)===null||t===void 0?void 0:t.disconnect()}componentWillLoad(){d(this)}componentDidRender(){n(this)}componentDidLoad(){h(this);const{filterEl:t}=this;const i=t===null||t===void 0?void 0:t.filteredItems;if(i){this.filteredData=i}this.updateFilteredItems()}async setFocus(){var t;await m(this);(t=this.enabledListItems.find((t=>t.active)))===null||t===void 0?void 0:t.setFocus()}render(){const{loading:t,label:i,disabled:a,dataForFilter:n,filterEnabled:o,filterPlaceholder:l,filterText:c}=this;return e("div",{class:p.container},t?e("calcite-scrim",{class:p.scrim,loading:t}):null,e("table",{"aria-busy":s(t),"aria-label":i||"",class:p.table,onKeyDown:this.handleListKeydown,role:"treegrid"},o?e("thead",null,e("tr",{class:{[p.sticky]:true}},e("th",{colSpan:r},e("calcite-filter",{"aria-label":l,disabled:t||a,items:n,onCalciteFilterChange:this.handleFilter,placeholder:l,value:c,ref:t=>this.filterEl=t})))):null,e("tbody",{class:p.tableContainer},e("slot",{onSlotchange:this.handleDefaultSlotChange}))))}updateListItems(){const{selectionAppearance:t,selectionMode:i}=this;const e=this.queryListItems();e.forEach((e=>{e.selectionAppearance=t;e.selectionMode=i}));this.listItems=e;this.enabledListItems=e.filter((t=>!t.disabled));if(this.filterEnabled){this.dataForFilter=this.getItemData()}this.setActiveListItem();this.updateSelectedItems();this.updateFilteredItems()}get el(){return a(this)}static get watchers(){return{filterEnabled:["handleFilterEnabledChange"],selectionMode:["handleSelectionAppearanceChange"],selectionAppearance:["handleSelectionAppearanceChange"]}}};w.style=b;export{w as calcite_list};
//# sourceMappingURL=p-ac4d1964.entry.js.map
import{r as i,c as t,h as e,H as a,g as s}from"./p-a5f4e010.js";import{s as n,c as o,d as l,H as r}from"./p-9de4ab76.js";import{g as c}from"./p-30b0f762.js";import{u as h}from"./p-7b97aed3.js";import{n as d}from"./p-62d90ff5.js";import{c as m,d as u,g as p}from"./p-bd9dda02.js";import{c as f,a as g,s as b}from"./p-04967691.js";import{n as y,c as v,d as k}from"./p-1ddddc69.js";import{l as D,f as S,i as j}from"./p-0723a518.js";import"./p-ca562010.js";import"./p-5f83161a.js";import"./p-e6be3162.js";const C="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0.01}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host([disabled]){pointer-events:none;cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-ui-opacity-disabled)}:host{display:inline-block;-webkit-user-select:none;user-select:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}::slotted(input[slot=hidden-form-input]){margin:0 !important;opacity:0 !important;outline:none !important;padding:0 !important;position:absolute !important;inset:0 !important;transform:none !important;-webkit-appearance:none !important;z-index:-1 !important}";const w=class{constructor(e){i(this,e);this.calciteInputTimePickerChange=t(this,"calciteInputTimePickerChange",7);this.internalValueChange=false;this.previousValidValue=null;this.referenceElementId=`input-time-picker-${c()}`;this.calciteInternalInputBlurHandler=()=>{this.open=false;const i=this.shouldIncludeSeconds();const{effectiveLocale:t,numberingSystem:e,value:a,calciteInputEl:s}=this;y.numberFormatOptions={locale:t,numberingSystem:e,useGrouping:false};const n=y.delocalize(s.value);const o=D({value:n,includeSeconds:i,locale:t,numberingSystem:e});this.setInputValue(o||D({value:a,locale:t,numberingSystem:e,includeSeconds:i}))};this.calciteInternalInputFocusHandler=i=>{if(!this.readOnly){this.open=true;i.stopPropagation()}};this.calciteInputInputHandler=i=>{const t=i.target;y.numberFormatOptions={locale:this.effectiveLocale,numberingSystem:this.numberingSystem,useGrouping:false};const e=y.delocalize(t.value);this.setValue({value:e});const a=e.split("").map((i=>d.includes(i)?y.numberFormatter.format(Number(i)):i)).join("");this.setInputValue(a)};this.timePickerChangeHandler=i=>{i.stopPropagation();const t=i.target;const e=t.value;this.setValue({value:e,origin:"time-picker"})};this.keyDownHandler=i=>{const{defaultPrevented:t,key:e}=i;if(t){return}if(e==="Enter"){if(n(this)){i.preventDefault()}}if(e==="Escape"&&this.open){this.open=false;i.preventDefault()}};this.setCalcitePopoverEl=i=>{this.popoverEl=i};this.setCalciteInputEl=i=>{this.calciteInputEl=i};this.setCalciteTimePickerEl=i=>{this.calciteTimePickerEl=i};this.setInputValue=i=>{if(!this.calciteInputEl){return}this.calciteInputEl.value=i};this.setValue=({value:i,origin:t="input"})=>{const e=this.value;const a=S(i);const s=D({value:a,locale:this.effectiveLocale,numberingSystem:this.numberingSystem,includeSeconds:this.shouldIncludeSeconds()});this.internalValueChange=t!=="external"&&t!=="loading";const n=t!=="loading"&&t!=="external"&&(i!==this.previousValidValue&&!i||!!(!this.previousValidValue&&a)||a!==this.previousValidValue&&a);if(i){if(n){this.previousValidValue=a}if(a&&a!==this.value){this.value=a}this.localizedValue=s}else{this.value=i;this.localizedValue=null}if(t==="time-picker"||t==="external"){this.setInputValue(s)}if(n){const i=this.calciteInputTimePickerChange.emit();if(i.defaultPrevented){this.internalValueChange=false;this.value=e;this.setInputValue(e);this.previousValidValue=e}else{this.previousValidValue=a}}};this.open=false;this.disabled=false;this.form=undefined;this.readOnly=false;this.messagesOverrides=undefined;this.name=undefined;this.numberingSystem=undefined;this.required=false;this.scale="m";this.overlayPositioning="absolute";this.placement="auto";this.step=60;this.value=null;this.effectiveLocale="";this.localizedValue=undefined}openHandler(i){if(this.disabled||this.readOnly){this.open=false;return}if(i){this.reposition(true)}}handleDisabledAndReadOnlyChange(i){if(!i){this.open=false}}valueWatcher(i){if(!this.internalValueChange){this.setValue({value:i,origin:"external"})}this.internalValueChange=false}effectiveLocaleWatcher(){this.setInputValue(D({value:this.value,locale:this.effectiveLocale,numberingSystem:this.numberingSystem,includeSeconds:this.shouldIncludeSeconds()}))}clickHandler(i){if(i.composedPath().includes(this.calciteTimePickerEl)){return}this.setFocus()}timePickerBlurHandler(i){i.preventDefault();i.stopPropagation();this.open=false}timePickerFocusHandler(i){i.preventDefault();i.stopPropagation();if(!this.readOnly){this.open=true}}async setFocus(){await f(this);this.el.focus()}async reposition(i=false){var t;(t=this.popoverEl)===null||t===void 0?void 0:t.reposition(i)}onLabelClick(){this.setFocus()}shouldIncludeSeconds(){return this.step<60}connectedCallback(){v(this);if(this.value){this.setValue({value:j(this.value)?this.value:undefined,origin:"loading"})}m(this);o(this)}componentWillLoad(){g(this)}componentDidLoad(){b(this);this.setInputValue(this.localizedValue)}disconnectedCallback(){u(this);l(this);k(this)}componentDidRender(){h(this)}render(){const i=`${this.referenceElementId}-popover`;return e(a,{onKeyDown:this.keyDownHandler},e("div",{"aria-controls":i,"aria-haspopup":"dialog","aria-label":this.name,"aria-owns":i,id:this.referenceElementId,role:"combobox"},e("calcite-input",{disabled:this.disabled,icon:"clock",label:p(this),onCalciteInputInput:this.calciteInputInputHandler,onCalciteInternalInputBlur:this.calciteInternalInputBlurHandler,onCalciteInternalInputFocus:this.calciteInternalInputFocusHandler,readOnly:this.readOnly,scale:this.scale,step:this.step,ref:this.setCalciteInputEl})),e("calcite-popover",{focusTrapDisabled:true,id:i,label:"Time Picker",open:this.open,overlayPositioning:this.overlayPositioning,placement:this.placement,referenceElement:this.referenceElementId,triggerDisabled:true,ref:this.setCalcitePopoverEl},e("calcite-time-picker",{lang:this.effectiveLocale,messageOverrides:this.messagesOverrides,numberingSystem:this.numberingSystem,onCalciteInternalTimePickerChange:this.timePickerChangeHandler,scale:this.scale,step:this.step,value:this.value,ref:this.setCalciteTimePickerEl})),e(r,{component:this}))}static get delegatesFocus(){return true}get el(){return s(this)}static get watchers(){return{open:["openHandler"],disabled:["handleDisabledAndReadOnlyChange"],readOnly:["handleDisabledAndReadOnlyChange"],value:["valueWatcher"],effectiveLocale:["effectiveLocaleWatcher"]}}};w.style=C;export{w as calcite_input_time_picker};
//# sourceMappingURL=p-cb8a099d.entry.js.map
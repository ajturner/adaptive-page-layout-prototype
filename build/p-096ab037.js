import{g as t}from"./p-985ef3b4.js";import{h as s,a as i,t as e}from"./p-ca562010.js";import{S as n}from"./p-26ace40d.js";import{d as r}from"./p-58421494.js";import{h as o,H as a}from"./p-a5f4e010.js";import{C as c,S as l}from"./p-523967dc.js";
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.2.0
 */function f(){this.setUpItems();this.setUpFilter();this.deselectRemovedItems()}const u=["ArrowUp","ArrowDown"];function h(){this.setUpItems();this.setUpFilter();this.emitCalciteListChange=r(y.bind(this),0);this.emitCalciteListFilter=r(x.bind(this),0)}function m(){this.mutationObserver?.observe(this.el,{childList:true,subtree:true})}function d(){this.mutationObserver?.disconnect()}function p(t){const{selectedValues:i}=this;const{item:e,value:n,selected:r,shiftPressed:o}=t.detail;if(r){if(this.multiple&&o){this.selectSiblings(e)}if(!this.multiple){this.deselectSiblingItems(e)}i.set(n,e)}else{i.delete(n);if(this.multiple&&o){this.selectSiblings(e,true)}}if(!this.multiple){E(e,r);if(r){s(e)}}this.lastSelectedItem=e;this.emitCalciteListChange()}function b(t){const s=t.detail.oldValue;const i=this.selectedValues;if(i.has(s)){const e=i.get(s);i.delete(s);i.set(t.detail.newValue,e)}t.stopPropagation()}function g(t){return!!u.find((s=>s===t))}function v(t){const{el:s,items:i,multiple:e,selectedValues:n}=this;if(e){return}const r=s.contains(t.relatedTarget);if(r){return}j(i).forEach((s=>{E(s,n.size===0?s.contains(t.target)||t.target===s:s.selected)}))}function w(t){const{key:i,target:e}=t;if(!g(i)){return}const{items:n,multiple:r,selectionFollowsFocus:o}=this;const{length:a}=n;const c=n.indexOf(e);if(!a||c===-1){return}t.preventDefault();const l=F(this,e,i==="ArrowUp"?"up":"down");const f=n[l];n.forEach((t=>E(t,t===f)));if(!r&&o){f.selected=true}s(f)}function F(s,i,e){const{items:n}=s;const{length:r}=n;const o=n.indexOf(i);const a=e==="up"?-1:1;let c=1;let l=t(o+a*c++,r);const f=l;while(n[l].disabled){l=t(o+a*c++,r);if(l===f){break}}return l}function A(t,s){const{items:i}=t;return i.indexOf(s)}function j(t){return t.filter((t=>!t.disabled))}function x(){this.calciteListFilter.emit()}function y(){this.calciteListChange.emit(this.selectedValues)}function C(t){if(t.defaultPrevented){return}const s=t.target;const i=this.selectedValues;if(s.parentElement.tagName==="CALCITE-PICK-LIST-GROUP"&&s.slot===n.parentItem){s.parentElement.remove();Array.from(s.parentElement.children).forEach((t=>i.delete(t.value)))}else{s.remove();i.delete(s.value)}this.emitCalciteListChange()}function E(t,s){if(t.disabled){return}if(s){t.removeAttribute("tabindex")}else{t.setAttribute("tabindex","-1")}}async function k(t){if(this.filterEnabled&&t==="filter"){await s(this.filterEl);return}const{items:i,multiple:e,selectionFollowsFocus:n}=this;if(i.length===0){return}if(e){return j(i)[0]?.setFocus()}const r=j(i);const o=r.find((t=>t.selected))||r[0];if(n&&o){o.selected=true}return o.setFocus()}function I(t){this.items=Array.from(this.el.querySelectorAll(t));let s=false;const{items:i}=this;i.forEach((t=>{t.icon=this.getIconType();if(!this.multiple){t.deselectDisabled=true;E(t,false)}if(t.selected){s=true;E(t,true);this.selectedValues.set(t.value,t)}}));const[e]=i;if(!s&&e&&!e.disabled){E(e,true)}}function L(){const t=this.selectedValues;const s=this.items.map((({value:t})=>t));t.forEach((t=>{if(!s.includes(t.value)){this.selectedValues.delete(t.value)}}))}function P(t){this.items.forEach((s=>{if(s.value!==t.value){s.toggleSelected(false);if(this.selectedValues.has(s.value)){this.selectedValues.delete(s.value)}}}))}function S(t,s=false){if(!this.lastSelectedItem){return}const{items:i}=this;const e=i.findIndex((t=>t.value===this.lastSelectedItem.value));const n=i.findIndex((s=>s.value===t.value));i.slice(Math.min(e,n),Math.max(e,n)).forEach((t=>{t.toggleSelected(!s);if(!s){this.selectedValues.set(t.value,t)}else{this.selectedValues.delete(t.value)}}))}let T;function U(t=false){const{filteredData:s,filterText:e}=this;const n=s.map((t=>t.value));let r=false;if(!T){T=new Set}const o=this.items?.filter((t=>{const s=t.parentElement;const i=s.matches("calcite-pick-list-group");if(i){T.add(s)}const o=e?n.includes(t.value):true;t.hidden=!o;if(!r){r=o&&t.selected}return o}))||[];T.forEach((t=>{const s=o.some((s=>t.contains(s)));t.hidden=!s;if(!s){return}const e=i(t,"parent-item");if(e){e.hidden=false;if(o.includes(e)){Array.from(t.children).forEach((t=>t.hidden=false))}}}));T.clear();if(o.length>0&&!r&&!this.multiple){E(o[0],true)}this.setFilteredItems(o);if(t){this.emitCalciteListFilter()}}function D(){const t=this.filterEl?.filteredItems;if(t){this.filteredData=t}this.handleFilter()}function M(t){t.stopPropagation();const{filteredItems:s,value:i}=t.currentTarget;this.filterText=i;this.filteredData=s;this.handleFilter(true)}function V(){return this.items.map((t=>({label:t.label,description:t.description,metadata:t.metadata,value:t.value})))}
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.2.0
 */const q=({props:{disabled:t,loading:s,filterEnabled:i,dataForFilter:n,handleFilterEvent:r,filterPlaceholder:f,filterText:u,setFilterEl:h,dragEnabled:m,storeAssistiveEl:d},...p})=>{const b=o("slot",null);return o(a,{"aria-busy":e(s),role:"menu",...p},o("section",null,m?o("span",{"aria-live":"assertive",class:"assistive-text",ref:d}):null,o("header",{class:{[c.sticky]:true}},i?o("calcite-filter",{"aria-label":f,disabled:s||t,items:n,onCalciteFilterChange:r,placeholder:f,value:u,ref:h}):null,o("slot",{name:l.menuActions})),s?o("calcite-scrim",{loading:s}):null,b))};export{q as L,P as a,M as b,m as c,L as d,d as e,D as f,V as g,U as h,h as i,p as j,w as k,b as l,f as m,v as n,I as o,k as p,A as q,C as r,S as s,F as t};
//# sourceMappingURL=p-096ab037.js.map
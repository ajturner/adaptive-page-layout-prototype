{"version":3,"names":["overflowActionsDebounceInMs","groupBufferPx","getAverage","arr","reduce","p","c","length","geActionDimensions","actions","actionLen","actionWidth","map","action","clientWidth","actionHeight","clientHeight","getMaxActionCount","width","layout","height","groupCount","maxContainerPx","avgItemPx","Math","floor","getOverflowCount","actionCount","max","queryActions","el","Array","from","querySelectorAll","filter","closest","slot","ACTION_MENU_SLOTS","trigger","overflowActions","actionGroups","expanded","overflowCount","needToSlotCount","reverse","forEach","group","slottedWithinGroupCount","groupActions","groupAction","ACTION_GROUP_SLOTS","menuActions","removeAttribute","textEnabled","some","unslottedActions","setAttribute","forceUpdate","ICONS","chevronsLeft","chevronsRight","getCalcitePosition","position","toggleChildActionText","parent","setTooltipReference","tooltip","referenceElement","ref","ExpandToggle","intlExpand","intlCollapse","toggle","scale","rtl","getElementDir","expandText","icons","end","expandIcon","collapseIcon","actionNode","h","icon","onClick","text"],"sources":["./node_modules/@esri/calcite-components/dist/collection/components/action-bar/utils.js","./node_modules/@esri/calcite-components/dist/collection/components/functional/ExpandToggle.js"],"sourcesContent":["/*!\n * All material copyright ESRI, All Rights Reserved, unless otherwise specified.\n * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.\n * v1.2.0\n */\nimport { forceUpdate } from \"@stencil/core\";\nimport { SLOTS as ACTION_GROUP_SLOTS } from \"../action-group/resources\";\nimport { SLOTS as ACTION_MENU_SLOTS } from \"../action-menu/resources\";\nexport const overflowActionsDebounceInMs = 150;\nconst groupBufferPx = 2;\nconst getAverage = (arr) => arr.reduce((p, c) => p + c, 0) / arr.length;\nexport const geActionDimensions = (actions) => {\n  const actionLen = actions?.length;\n  return {\n    actionWidth: actionLen ? getAverage(actions.map((action) => action.clientWidth || 0)) : 0,\n    actionHeight: actionLen ? getAverage(actions.map((action) => action.clientHeight || 0)) : 0\n  };\n};\nconst getMaxActionCount = ({ width, actionWidth, layout, height, actionHeight, groupCount }) => {\n  const maxContainerPx = layout === \"horizontal\" ? width : height;\n  const avgItemPx = layout === \"horizontal\" ? actionWidth : actionHeight;\n  return Math.floor((maxContainerPx - groupCount * groupBufferPx) / avgItemPx);\n};\nexport const getOverflowCount = ({ layout, actionCount, actionWidth, width, actionHeight, height, groupCount }) => {\n  return Math.max(actionCount - getMaxActionCount({ width, actionWidth, layout, height, actionHeight, groupCount }), 0);\n};\nexport const queryActions = (el) => {\n  return Array.from(el.querySelectorAll(\"calcite-action\")).filter((action) => action.closest(\"calcite-action-menu\") ? action.slot === ACTION_MENU_SLOTS.trigger : true);\n};\nexport const overflowActions = ({ actionGroups, expanded, overflowCount }) => {\n  let needToSlotCount = overflowCount;\n  actionGroups.reverse().forEach((group) => {\n    let slottedWithinGroupCount = 0;\n    const groupActions = queryActions(group).reverse();\n    groupActions.forEach((groupAction) => {\n      if (groupAction.slot === ACTION_GROUP_SLOTS.menuActions) {\n        groupAction.removeAttribute(\"slot\");\n        groupAction.textEnabled = expanded;\n      }\n    });\n    if (needToSlotCount > 0) {\n      groupActions.some((groupAction) => {\n        const unslottedActions = groupActions.filter((action) => !action.slot);\n        if (unslottedActions.length > 1 && groupActions.length > 2 && !groupAction.closest(\"calcite-action-menu\")) {\n          groupAction.textEnabled = true;\n          groupAction.setAttribute(\"slot\", ACTION_GROUP_SLOTS.menuActions);\n          slottedWithinGroupCount++;\n          if (slottedWithinGroupCount > 1) {\n            needToSlotCount--;\n          }\n        }\n        return needToSlotCount < 1;\n      });\n    }\n    forceUpdate(group);\n  });\n};\n","/*!\n * All material copyright ESRI, All Rights Reserved, unless otherwise specified.\n * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.\n * v1.2.0\n */\nimport { h } from \"@stencil/core\";\nimport { getElementDir } from \"../../utils/dom\";\nimport { queryActions } from \"../action-bar/utils\";\nimport { SLOTS as ACTION_GROUP_SLOTS } from \"../action-group/resources\";\nconst ICONS = {\n  chevronsLeft: \"chevrons-left\",\n  chevronsRight: \"chevrons-right\"\n};\nfunction getCalcitePosition(position, el) {\n  return position || el.closest(\"calcite-shell-panel\")?.position || \"start\";\n}\nexport function toggleChildActionText({ parent, expanded }) {\n  queryActions(parent)\n    .filter((el) => el.slot !== ACTION_GROUP_SLOTS.menuActions)\n    .forEach((action) => (action.textEnabled = expanded));\n  parent\n    .querySelectorAll(\"calcite-action-group, calcite-action-menu\")\n    .forEach((el) => (el.expanded = expanded));\n}\nconst setTooltipReference = ({ tooltip, referenceElement, expanded, ref }) => {\n  if (tooltip) {\n    tooltip.referenceElement = !expanded && referenceElement ? referenceElement : null;\n  }\n  if (ref) {\n    ref(referenceElement);\n  }\n  return referenceElement;\n};\nexport const ExpandToggle = ({ expanded, intlExpand, intlCollapse, toggle, el, position, tooltip, ref, scale }) => {\n  const rtl = getElementDir(el) === \"rtl\";\n  const expandText = expanded ? intlCollapse : intlExpand;\n  const icons = [ICONS.chevronsLeft, ICONS.chevronsRight];\n  if (rtl) {\n    icons.reverse();\n  }\n  const end = getCalcitePosition(position, el) === \"end\";\n  const expandIcon = end ? icons[1] : icons[0];\n  const collapseIcon = end ? icons[0] : icons[1];\n  const actionNode = (h(\"calcite-action\", { icon: expanded ? expandIcon : collapseIcon, onClick: toggle, scale: scale, text: expandText, textEnabled: expanded,\n    // eslint-disable-next-line react/jsx-sort-props\n    ref: (referenceElement) => setTooltipReference({ tooltip, referenceElement, expanded, ref }) }));\n  return actionNode;\n};\n"],"mappings":"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"}
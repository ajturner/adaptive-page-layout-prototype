import{r as t,c as i,h as e,g as s}from"./p-a5f4e010.js";import{c as o}from"./p-1a031d7e.js";import{i as n,b as a}from"./p-ca562010.js";import{n as l,C as r,p as c,c as h}from"./p-b4ff9727.js";import{u as d}from"./p-7b97aed3.js";import{i as u}from"./p-62d90ff5.js";import{c as f,a as p,s as m}from"./p-04967691.js";import{c as g,d as v}from"./p-1ddddc69.js";import{c as b}from"./p-75da41a4.js";import{u as x,s as w,c as y,d as C}from"./p-662302cc.js";import{t as k}from"./p-7cf0703a.js";import"./p-0bc4f624.js";import"./p-30b0f762.js";import"./p-5f83161a.js";import"./p-e6be3162.js";import"./p-58421494.js";
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.2.0
 */const S={container:"container",controlSection:"control-section",hexOptions:"color-hex-options",section:"section",header:"header",control:"control",splitSection:"section--split",colorModeContainer:"color-mode-container",colorMode:"color-mode",channels:"channels",channel:"channel",savedColors:"saved-colors",savedColorsSection:"saved-colors-section",saveColor:"save-color",deleteColor:"delete-color",savedColorsButtons:"saved-colors-buttons",headerHex:"header--hex",colorFieldAndSlider:"color-field-and-slider",colorFieldAndSliderInteractive:"color-field-and-slider--interactive",colorFieldAndSliderWrap:"color-field-and-slider-wrap",scope:"scope",hueScope:"scope--hue",colorFieldScope:"scope--color-field",savedColor:"saved-color"};const F=o("#007AC2");const A="calcite-color-";const D={r:255,g:255,b:255};const j={h:360,s:100,v:100};const M={s:{slider:{height:10,width:160},colorField:{height:80,width:160},thumb:{radius:8}},m:{slider:{height:14,width:272},colorField:{height:150,width:272},thumb:{radius:10}},l:{slider:{height:16,width:464},colorField:{height:200,width:464},thumb:{radius:12}}};const z="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0.01}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host([disabled]){pointer-events:none;cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-ui-opacity-disabled)}:host{display:inline-block;font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-normal)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}:host([scale=s]) .container{inline-size:160px}:host([scale=s]) .saved-colors{grid-template-columns:repeat(auto-fill, minmax(20px, 1fr))}:host([scale=s]) .channels{flex-direction:column}:host([scale=s]) .channel{inline-size:100%;margin-block-end:4px}:host([scale=s]) .channel:last-child{margin-block-end:0}:host([scale=m]) .container{inline-size:272px}:host([scale=l]) .header{padding-block-end:0px}:host([scale=l]){font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=l]) .container{inline-size:464px}:host([scale=l]) .color-field-and-slider{margin-block-end:-20px}:host([scale=l]) .section{padding-block:0 16px;padding-inline:16px}:host([scale=l]) .section:first-of-type{padding-block-start:16px}:host([scale=l]) .saved-colors{grid-template-columns:repeat(auto-fill, minmax(28px, 1fr));grid-gap:12px;padding-block-start:16px}:host([scale=l]) .control-section{flex-wrap:nowrap;align-items:baseline}:host([scale=l]) .control-section>:nth-child(2){margin-inline-start:12px}:host([scale=l]) .color-hex-options{display:flex;flex-shrink:1;flex-direction:column;justify-content:space-around;min-block-size:98px;inline-size:160px}:host([scale=l]) .color-mode-container{flex-shrink:3}.container{background-color:var(--calcite-ui-foreground-1);display:inline-block;border:1px solid var(--calcite-ui-border-1)}.color-field-and-slider-wrap{position:relative}.scope{pointer-events:none;position:absolute;font-size:var(--calcite-font-size--1);outline-color:transparent;outline-offset:14px}.scope:focus{outline:2px solid var(--calcite-ui-brand);outline-offset:16px}.color-field-and-slider{margin-block-end:-16px;touch-action:none}.color-field-and-slider--interactive{cursor:pointer}.control-section{display:flex;flex-direction:row;flex-wrap:wrap}.section{padding-block:0 12px;padding-inline:12px}.section:first-of-type{padding-block-start:12px}.color-hex-options,.section--split{flex-grow:1}.header{display:flex;align-items:center;justify-content:space-between;padding-block-end:0.25rem;color:var(--calcite-ui-text-1)}.header--hex,.color-mode-container{padding-block-start:12px}.channels{display:flex;justify-content:space-between}.channel{inline-size:31%}.saved-colors{padding-block-start:12px;display:grid;grid-template-columns:repeat(auto-fill, minmax(24px, 1fr));grid-gap:8px;inline-size:100%}.saved-colors-buttons{display:flex}.saved-color{outline-offset:0;outline-color:transparent;cursor:pointer}.saved-color:focus{outline:2px solid var(--calcite-ui-brand);outline-offset:2px}.saved-color:hover{transition:outline-color var(--calcite-internal-animation-timing-fast) ease-in-out;outline:2px solid var(--calcite-ui-border-2);outline-offset:2px}";const $=16;const L=l(F.hex());const _="auto";const I=class{constructor(s){t(this,s);this.calciteColorPickerChange=i(this,"calciteColorPickerChange",6);this.calciteColorPickerInput=i(this,"calciteColorPickerInput",6);this.colorFieldAndSliderHovered=false;this.hueThumbState="idle";this.internalColorUpdateContext=null;this.mode=r.HEX;this.shiftKeyChannelAdjustment=0;this.sliderThumbState="idle";this.handleTabActivate=t=>{this.channelMode=t.currentTarget.getAttribute("data-color-mode");this.updateChannelsFromColor(this.color)};this.handleColorFieldScopeKeyDown=t=>{const{key:i}=t;const e={ArrowUp:{x:0,y:-10},ArrowRight:{x:10,y:0},ArrowDown:{x:0,y:10},ArrowLeft:{x:-10,y:0}};if(e[i]){t.preventDefault();this.scopeOrientation=i==="ArrowDown"||i==="ArrowUp"?"vertical":"horizontal";this.captureColorFieldColor(this.colorFieldScopeLeft+e[i].x||0,this.colorFieldScopeTop+e[i].y||0,false)}};this.handleHueScopeKeyDown=t=>{const i=t.shiftKey?10:1;const{key:e}=t;const s={ArrowUp:1,ArrowRight:1,ArrowDown:-1,ArrowLeft:-1};if(s[e]){t.preventDefault();const o=s[e]*i;const n=this.baseColorFieldColor.hue();const a=this.baseColorFieldColor.hue(n+o);this.internalColorSet(a,false)}};this.handleHexInputChange=t=>{t.stopPropagation();const{allowEmpty:i,color:e}=this;const s=t.target;const n=s.value;if(i&&!n){this.internalColorSet(null);return}const a=e&&l(e.hex());if(n!==a){this.internalColorSet(o(n))}};this.handleSavedColorSelect=t=>{const i=t.currentTarget;this.internalColorSet(o(i.color))};this.handleChannelInput=t=>{const i=t.currentTarget;const e=Number(i.getAttribute("data-channel-index"));const s=this.channelMode==="rgb"?D[Object.keys(D)[e]]:j[Object.keys(j)[e]];let o;if(this.allowEmpty&&!i.value){o=""}else{const t=Number(i.value)+this.shiftKeyChannelAdjustment;const e=b(t,0,s);o=e.toString()}i.value=o;i.internalSyncChildElValue()};this.handleChannelChange=t=>{const i=t.currentTarget;const e=Number(i.getAttribute("data-channel-index"));const s=[...this.channels];const o=this.allowEmpty&&!i.value;if(o){this.channels=[null,null,null];this.internalColorSet(null);return}s[e]=Number(i.value);this.updateColorFromChannels(s)};this.handleSavedColorKeyDown=t=>{if(u(t.key)){t.preventDefault();this.handleSavedColorSelect(t)}};this.handleColorFieldAndSliderPointerLeave=()=>{this.colorFieldAndSliderInteractive=false;this.colorFieldAndSliderHovered=false;if(this.sliderThumbState!=="drag"&&this.hueThumbState!=="drag"){this.hueThumbState="idle";this.sliderThumbState="idle";this.drawColorFieldAndSlider()}};this.handleColorFieldAndSliderPointerDown=t=>{var i,e;if(!n(t)){return}const{offsetX:s,offsetY:o}=t;const a=this.getCanvasRegion(o);if(a==="color-field"){this.hueThumbState="drag";this.captureColorFieldColor(s,o);(i=this.colorFieldScopeNode)===null||i===void 0?void 0:i.focus()}else if(a==="slider"){this.sliderThumbState="drag";this.captureHueSliderColor(s);(e=this.hueScopeNode)===null||e===void 0?void 0:e.focus()}t.preventDefault();document.addEventListener("pointermove",this.globalPointerMoveHandler);document.addEventListener("pointerup",this.globalPointerUpHandler,{once:true});this.activeColorFieldAndSliderRect=this.fieldAndSliderRenderingContext.canvas.getBoundingClientRect()};this.globalPointerUpHandler=t=>{if(!n(t)){return}const i=this.sliderThumbState==="drag"||this.hueThumbState==="drag";this.hueThumbState="idle";this.sliderThumbState="idle";this.activeColorFieldAndSliderRect=null;this.drawColorFieldAndSlider();if(i){this.calciteColorPickerChange.emit()}};this.globalPointerMoveHandler=t=>{const{el:i,dimensions:e}=this;const s=this.sliderThumbState==="drag";const o=this.hueThumbState==="drag";if(!i.isConnected||!s&&!o){return}let n;let a;const l=this.activeColorFieldAndSliderRect;const{clientX:r,clientY:c}=t;if(this.colorFieldAndSliderHovered){n=r-l.x;a=c-l.y}else{const t=e.colorField.width;const i=e.colorField.height;const s=e.slider.height;if(r<l.x+t&&r>l.x){n=r-l.x}else if(r<l.x){n=0}else{n=t-1}if(c<l.y+i+s&&c>l.y){a=c-l.y}else if(c<l.y){a=0}else{a=i+s}}if(o){this.captureColorFieldColor(n,a,false)}else{this.captureHueSliderColor(n)}};this.handleColorFieldAndSliderPointerEnterOrMove=({offsetX:t,offsetY:i})=>{const{dimensions:{colorField:e,slider:s,thumb:o}}=this;this.colorFieldAndSliderInteractive=i<=e.height+s.height;this.colorFieldAndSliderHovered=true;const n=this.getCanvasRegion(i);if(n==="color-field"){const s=this.hueThumbState;const n=this.baseColorFieldColor.hsv();const a=Math.round(n.saturationv()/(j.s/e.width));const l=Math.round(e.height-n.value()/(j.v/e.height));const r=this.containsPoint(t,i,a,l,o.radius);let c=false;if(s==="idle"&&r){this.hueThumbState="hover";c=true}else if(s==="hover"&&!r){this.hueThumbState="idle";c=true}if(this.hueThumbState!=="drag"){if(c){this.drawColorFieldAndSlider()}}}else if(n==="slider"){const n=this.baseColorFieldColor.hsv().saturationv(100).value(100);const a=this.sliderThumbState;const l=Math.round(n.hue()/(360/s.width));const r=Math.round((s.height+this.getSliderCapSpacing())/2)+e.height;const c=this.containsPoint(t,i,l,r,o.radius);let h=false;if(a==="idle"&&c){this.sliderThumbState="hover";h=true}else if(a==="hover"&&!c){this.sliderThumbState="idle";h=true}if(this.sliderThumbState!=="drag"){if(h){this.drawColorFieldAndSlider()}}}};this.storeColorFieldScope=t=>{this.colorFieldScopeNode=t};this.storeHueScope=t=>{this.hueScopeNode=t};this.renderChannelsTabTitle=t=>{const{channelMode:i,messages:s}=this;const o=t===i;const n=t==="rgb"?s.rgb:s.hsv;return e("calcite-tab-title",{class:S.colorMode,"data-color-mode":t,key:t,onCalciteTabsActivate:this.handleTabActivate,selected:o},n)};this.renderChannelsTab=t=>{const{channelMode:i,channels:s,messages:o}=this;const n=t===i;const l=t==="rgb";const r=l?[o.r,o.g,o.b]:[o.h,o.s,o.v];const c=l?[o.red,o.green,o.blue]:[o.hue,o.saturation,o.value];const h=a(this.el);return e("calcite-tab",{class:S.control,key:t,selected:n},e("div",{class:S.channels,dir:"ltr"},s.map(((t,i)=>this.renderChannel(t,i,r[i],c[i],h)))))};this.renderChannel=(t,i,s,o,n)=>e("calcite-input",{class:S.channel,"data-channel-index":i,dir:n,label:o,lang:this.effectiveLocale,numberButtonType:"none",numberingSystem:this.numberingSystem,onCalciteInputChange:this.handleChannelChange,onCalciteInputInput:this.handleChannelInput,onKeyDown:this.handleKeyDown,prefixText:s,scale:this.scale==="l"?"m":"s",type:"number",value:t===null||t===void 0?void 0:t.toString()});this.deleteColor=()=>{const t=this.color.hex();const i=this.savedColors.indexOf(t)>-1;if(!i){return}const e=this.savedColors.filter((i=>i!==t));this.savedColors=e;const s=`${A}${this.storageId}`;if(this.storageId){localStorage.setItem(s,JSON.stringify(e))}};this.saveColor=()=>{const t=this.color.hex();const i=this.savedColors.indexOf(t)>-1;if(i){return}const e=[...this.savedColors,t];this.savedColors=e;const s=`${A}${this.storageId}`;if(this.storageId){localStorage.setItem(s,JSON.stringify(e))}};this.drawColorFieldAndSlider=k((()=>{if(!this.fieldAndSliderRenderingContext){return}this.drawColorField();this.drawHueSlider()}),$);this.captureColorFieldColor=(t,i,e=true)=>{const{dimensions:{colorField:{height:s,width:o}}}=this;const n=Math.round(j.s/o*t);const a=Math.round(j.v/s*(s-i));this.internalColorSet(this.baseColorFieldColor.hsv().saturationv(n).value(a),e)};this.initColorFieldAndSlider=t=>{this.fieldAndSliderRenderingContext=t.getContext("2d");this.updateCanvasSize(t)};this.allowEmpty=false;this.color=F;this.disabled=false;this.format=_;this.hideHex=false;this.hideChannels=false;this.hideSaved=false;this.scale="m";this.storageId=undefined;this.messageOverrides=undefined;this.numberingSystem=undefined;this.value=L;this.defaultMessages=undefined;this.colorFieldAndSliderInteractive=false;this.channelMode="rgb";this.channels=this.toChannels(F);this.dimensions=M.m;this.effectiveLocale="";this.messages=undefined;this.savedColors=[];this.colorFieldScopeTop=undefined;this.colorFieldScopeLeft=undefined;this.scopeOrientation=undefined;this.hueScopeLeft=undefined;this.hueScopeTop=undefined}handleColorChange(t,i){this.drawColorFieldAndSlider();this.updateChannelsFromColor(t);this.previousColor=i}handleFormatChange(t){this.setMode(t);this.internalColorSet(this.color,false,"internal")}handleScaleChange(t="m"){var i;this.updateDimensions(t);this.updateCanvasSize((i=this.fieldAndSliderRenderingContext)===null||i===void 0?void 0:i.canvas)}onMessagesChange(){}handleValueChange(t,i){const{allowEmpty:e,format:s}=this;const n=!e||t;let a=false;if(n){const e=c(t);if(!e||s!=="auto"&&e!==s){this.showIncompatibleColorWarning(t,s);this.value=i;return}a=this.mode!==e;this.setMode(e)}const l=this.sliderThumbState==="drag"||this.hueThumbState==="drag";if(this.internalColorUpdateContext==="initial"){return}if(this.internalColorUpdateContext==="user-interaction"){this.calciteColorPickerInput.emit();if(!l){this.calciteColorPickerChange.emit()}return}const r=e&&!t?null:o(t);const d=!h(r,this.color);if(a||d){this.internalColorSet(r,true,"internal")}}get baseColorFieldColor(){return this.color||this.previousColor||F}effectiveLocaleChange(){x(this,this.effectiveLocale)}handleChannelKeyUpOrDown(t){this.shiftKeyChannelAdjustment=0;const{key:i}=t;if(i!=="ArrowUp"&&i!=="ArrowDown"||!t.composedPath().some((t=>{var i;return(i=t.classList)===null||i===void 0?void 0:i.contains(S.channel)}))){return}const{shiftKey:e}=t;t.preventDefault();if(!this.color){this.internalColorSet(this.previousColor);t.stopPropagation();return}const s=9;this.shiftKeyChannelAdjustment=i==="ArrowUp"&&e?s:i==="ArrowDown"&&e?-s:0}async setFocus(){await f(this);this.el.focus()}async componentWillLoad(){p(this);const{allowEmpty:t,color:i,format:e,value:s}=this;const n=t&&!s;const a=c(s);const l=n||e==="auto"&&a||e===a;const r=n?null:l?o(s):i;if(!l){this.showIncompatibleColorWarning(s,e)}this.setMode(e);this.internalColorSet(r,false,"initial");this.updateDimensions(this.scale);const h=`${A}${this.storageId}`;if(this.storageId&&localStorage.getItem(h)){this.savedColors=JSON.parse(localStorage.getItem(h))}await w(this)}connectedCallback(){g(this);y(this)}componentDidLoad(){m(this)}disconnectedCallback(){document.removeEventListener("pointermove",this.globalPointerMoveHandler);document.removeEventListener("pointerup",this.globalPointerUpHandler);v(this);C(this)}componentDidRender(){d(this)}render(){const{allowEmpty:t,color:i,messages:s,hideHex:o,hideChannels:n,hideSaved:a,savedColors:l,scale:r}=this;const c=i?i.hex():null;const h=r==="l"?"m":"s";const{colorFieldAndSliderInteractive:d,colorFieldScopeTop:u,colorFieldScopeLeft:f,hueScopeLeft:p,hueScopeTop:m,scopeOrientation:g,dimensions:{colorField:{height:v,width:b},slider:{height:x}}}=this;const w=m!==null&&m!==void 0?m:x/2+v;const y=p!==null&&p!==void 0?p:b*F.hue()/j.h;const C=i===null;const k=g==="vertical";return e("div",{class:S.container},e("div",{class:S.colorFieldAndSliderWrap},e("canvas",{class:{[S.colorFieldAndSlider]:true,[S.colorFieldAndSliderInteractive]:d},onPointerDown:this.handleColorFieldAndSliderPointerDown,onPointerEnter:this.handleColorFieldAndSliderPointerEnterOrMove,onPointerLeave:this.handleColorFieldAndSliderPointerLeave,onPointerMove:this.handleColorFieldAndSliderPointerEnterOrMove,ref:this.initColorFieldAndSlider}),e("div",{"aria-label":k?s.value:s.saturation,"aria-valuemax":k?j.v:j.s,"aria-valuemin":"0","aria-valuenow":(k?i===null||i===void 0?void 0:i.saturationv():i===null||i===void 0?void 0:i.value())||"0",class:{[S.scope]:true,[S.colorFieldScope]:true},onKeyDown:this.handleColorFieldScopeKeyDown,role:"slider",style:{top:`${u||0}px`,left:`${f||0}px`},tabindex:"0",ref:this.storeColorFieldScope}),e("div",{"aria-label":s.hue,"aria-valuemax":j.h,"aria-valuemin":"0","aria-valuenow":(i===null||i===void 0?void 0:i.round().hue())||F.round().hue(),class:{[S.scope]:true,[S.hueScope]:true},onKeyDown:this.handleHueScopeKeyDown,role:"slider",style:{top:`${w}px`,left:`${y}px`},tabindex:"0",ref:this.storeHueScope})),o&&n?null:e("div",{class:{[S.controlSection]:true,[S.section]:true}},o?null:e("div",{class:S.hexOptions},e("span",{class:{[S.header]:true,[S.headerHex]:true}},s.hex),e("calcite-color-picker-hex-input",{allowEmpty:t,class:S.control,hexLabel:s.hex,numberingSystem:this.numberingSystem,onCalciteColorPickerHexInputChange:this.handleHexInputChange,scale:h,value:c})),n?null:e("calcite-tabs",{class:{[S.colorModeContainer]:true,[S.splitSection]:true},scale:h},e("calcite-tab-nav",{slot:"title-group"},this.renderChannelsTabTitle("rgb"),this.renderChannelsTabTitle("hsv")),this.renderChannelsTab("rgb"),this.renderChannelsTab("hsv"))),a?null:e("div",{class:{[S.savedColorsSection]:true,[S.section]:true}},e("div",{class:S.header},e("label",null,s.saved),e("div",{class:S.savedColorsButtons},e("calcite-button",{appearance:"transparent",class:S.deleteColor,disabled:C,iconStart:"minus",kind:"neutral",label:s.deleteColor,onClick:this.deleteColor,scale:h,type:"button"}),e("calcite-button",{appearance:"transparent",class:S.saveColor,disabled:C,iconStart:"plus",kind:"neutral",label:s.saveColor,onClick:this.saveColor,scale:h,type:"button"}))),l.length>0?e("div",{class:S.savedColors},[...l.map((t=>e("calcite-color-picker-swatch",{active:c===t,class:S.savedColor,color:t,key:t,onClick:this.handleSavedColorSelect,onKeyDown:this.handleSavedColorKeyDown,scale:r,tabIndex:0})))]):null))}handleKeyDown(t){if(t.key==="Enter"){t.preventDefault()}}showIncompatibleColorWarning(t,i){console.warn(`ignoring color value (${t}) as it is not compatible with the current format (${i})`)}setMode(t){this.mode=t==="auto"?this.mode:t}captureHueSliderColor(t){const{dimensions:{slider:{width:i}}}=this;const e=360/i*t;this.internalColorSet(this.baseColorFieldColor.hue(e),false)}getCanvasRegion(t){const{dimensions:{colorField:{height:i},slider:{height:e}}}=this;if(t<=i){return"color-field"}if(t<=i+e){return"slider"}return"none"}internalColorSet(t,i=true,e="user-interaction"){if(i&&h(t,this.color)){return}this.internalColorUpdateContext=e;this.color=t;this.value=this.toValue(t);this.internalColorUpdateContext=null}toValue(t,i=this.mode){if(!t){return null}const e="hex";if(i.includes(e)){return l(t.round()[e]())}if(i.includes("-css")){return t[i.replace("-css","").replace("a","")]().round().string()}const s=t[i]().round().object();if(i.endsWith("a")){s.a=s.alpha;delete s.alpha}return s}getSliderCapSpacing(){const{dimensions:{slider:{height:t},thumb:{radius:i}}}=this;return i*2-t}updateDimensions(t="m"){this.dimensions=M[t]}drawColorField(){const t=this.fieldAndSliderRenderingContext;const{dimensions:{colorField:{height:i,width:e}}}=this;t.fillStyle=this.baseColorFieldColor.hsv().saturationv(100).value(100).string();t.fillRect(0,0,e,i);const s=t.createLinearGradient(0,0,e,0);s.addColorStop(0,"rgba(255,255,255,1)");s.addColorStop(1,"rgba(255,255,255,0)");t.fillStyle=s;t.fillRect(0,0,e,i);const o=t.createLinearGradient(0,0,0,i);o.addColorStop(0,"rgba(0,0,0,0)");o.addColorStop(1,"rgba(0,0,0,1)");t.fillStyle=o;t.fillRect(0,0,e,i);this.drawActiveColorFieldColor()}setCanvasContextSize(t,{height:i,width:e}){const s=window.devicePixelRatio||1;t.width=e*s;t.height=i*s;t.style.height=`${i}px`;t.style.width=`${e}px`;const o=t.getContext("2d");o.scale(s,s)}updateCanvasSize(t){if(!t){return}this.setCanvasContextSize(t,{width:this.dimensions.colorField.width,height:this.dimensions.colorField.height+this.dimensions.slider.height+this.getSliderCapSpacing()*2});this.drawColorFieldAndSlider()}containsPoint(t,i,e,s,o){return Math.pow(t-e,2)+Math.pow(i-s,2)<=Math.pow(o,2)}drawActiveColorFieldColor(){const{color:t}=this;if(!t){return}const i=t.hsv();const{dimensions:{colorField:{height:e,width:s},thumb:{radius:o}}}=this;const n=i.saturationv()/(j.s/s);const a=e-i.value()/(j.v/e);requestAnimationFrame((()=>{this.colorFieldScopeLeft=n;this.colorFieldScopeTop=a}));this.drawThumb(this.fieldAndSliderRenderingContext,o,n,a,i,this.hueThumbState)}drawThumb(t,i,e,s,o,n){const a=0;const l=2*Math.PI;t.beginPath();t.arc(e,s,i,a,l);t.shadowBlur=n==="hover"?32:16;t.shadowColor=`rgba(0, 0, 0, ${n==="drag"?.32:.16})`;t.fillStyle="#fff";t.fill();t.beginPath();t.arc(e,s,i-3,a,l);t.shadowBlur=0;t.shadowColor="transparent";t.fillStyle=o.rgb().string();t.fill()}drawActiveHueSliderColor(){const{color:t}=this;if(!t){return}const i=t.hsv().saturationv(100).value(100);const{dimensions:{colorField:{height:e},slider:{height:s,width:o},thumb:{radius:n}}}=this;const a=i.hue()/(360/o);const l=s/2+e;requestAnimationFrame((()=>{this.hueScopeLeft=a;this.hueScopeTop=l}));this.drawThumb(this.fieldAndSliderRenderingContext,n,a,l,i,this.sliderThumbState)}drawHueSlider(){const t=this.fieldAndSliderRenderingContext;const{dimensions:{colorField:{height:i},slider:{height:e,width:s}}}=this;const n=t.createLinearGradient(0,0,s,0);const a=["red","yellow","lime","cyan","blue","magenta","red"];const l=1/(a.length-1);let r=0;a.forEach((t=>{n.addColorStop(r,o(t).string());r+=l}));t.fillStyle=n;t.clearRect(0,i,s,e+this.getSliderCapSpacing()*2);t.fillRect(0,i,s,e);this.drawActiveHueSliderColor()}updateColorFromChannels(t){this.internalColorSet(o(t,this.channelMode))}updateChannelsFromColor(t){this.channels=t?this.toChannels(t):[null,null,null]}toChannels(t){const{channelMode:i}=this;return t[i]().array().map((t=>Math.floor(t)))}static get delegatesFocus(){return true}static get assetsDirs(){return["assets"]}get el(){return s(this)}static get watchers(){return{color:["handleColorChange"],format:["handleFormatChange"],scale:["handleScaleChange"],messageOverrides:["onMessagesChange"],value:["handleValueChange"],effectiveLocale:["effectiveLocaleChange"]}}};I.style=z;export{I as calcite_color_picker};
//# sourceMappingURL=p-54af33f6.entry.js.map